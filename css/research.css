/* --- ================================ --- */
/* --- 3. 田野調查任務 (App 3) 樣式 --- */
/* --- ================================ --- */
#research-app main { padding: 20px; max-width: 1200px; margin: auto; }
#research-app header { text-align: center; padding-top: 20px; color: #3b4146; }
#research-app .tabs { display: flex; position: relative; background-color: #fff; box-shadow: 0 0 1px 0 rgba(24, 94, 224, 0.15), 0 6px 12px 0 rgba(24, 94, 224, 0.15); padding: 0.35rem; border-radius: 99px; width: fit-content; margin: 20px auto; }
#research-app .tabs * { z-index: 2; }
#research-app .tabs input[type="radio"] { display: none; }
#research-app .tab { display: flex; align-items: center; justify-content: center; height: 40px; width: 120px; font-size: 1rem; font-weight: 500; border-radius: 99px; cursor: pointer; transition: color 0.15s ease-in; color: #3b4146; }
#research-app input[type="radio"]:checked + .tab { color: #fff; }
#research-app input#less-option:checked ~ .glider { transform: translateX(0); }
#research-app input#all-option:checked ~ .glider { transform: translateX(100%); }
#research-app .glider { position: absolute; display: flex; height: 40px; width: 120px; background-color: #27ae60; z-index: 1; border-radius: 99px; transition: 0.25s ease-out; }
#research-app #research-container { display: flex; justify-content: center; align-items: flex-start; gap: 20px; }
#research-app .research-column { flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 20px; }
#research-app .task-category h2 { background-color: var(--category-main-color, #27ae60); font-size: 1.1em; padding: 10px 15px; color: white; border-radius: 8px; margin: 0 0 10px 0; }
#research-app .task-category { background-color: var(--category-bg-color, #e4f3e9); padding: 15px; border-radius: 12px; }
#research-app .task-item { background: #fff; border-radius: 8px; margin-bottom: 8px; box-shadow: 0 1px 2px rgba(0,0,0,0.07); }
#research-app .task-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; cursor: pointer; }
#research-app .task-text { font-weight: 600; color: #3b4146; padding-right: 15px; }
#research-app .reward-preview { display: flex; align-items: center; }
#research-app .reward-preview .reward-bubble { width: 42px; height: 42px; border: 2px solid white; box-shadow: 0 1px 3px rgba(0,0,0,0.2); background-color: #e9ecef; border-radius: 50%; display: flex; align-items: center; justify-content: center; position: relative; flex-shrink: 0; }
#research-app .reward-preview .reward-bubble:not(:first-child) { margin-left: -5px; }
#research-app .reward-preview img { max-width: 80%; max-height: 80%; object-fit: contain; }
#research-app .reward-preview .shiny-icon { width: 20px; position: absolute; top: -4px; right: -7px; filter: drop-shadow(0 0 1px black); }
#research-app .reward-preview .quantity { position: absolute; bottom: -5px; right: -5px; background-color: #555; color: white; font-size: 0.7em; font-weight: bold; padding: 1px 5px; border-radius: 10px; border: 1px solid white; }
#research-app .expand-arrow { color: #888; margin-left: 8px; transition: transform 0.3s ease-out; }
#research-app .task-item.active .expand-arrow { transform: rotate(180deg); }
#research-app .reward-details-container { max-height: 0; overflow: hidden; transition: max-height 0.35s ease-out; padding: 0 15px; }
#research-app .task-item.active .reward-details-container { max-height: 1000px; padding-bottom: 15px; transition: max-height 0.5s ease-in; }
#research-app .possible-rewards-text { font-size: 0.8em; color: #888; margin: 10px 0 5px; border-top: 1px solid #f0f0f0; padding-top: 15px; }
#research-app .reward-detail-row { display: flex; align-items: center; padding: 10px 0; border-top: 1px solid #f0f0f0; position: relative; }
#research-app .reward-detail-row:first-child { border-top: none; padding-top: 5px; }
#research-app .reward-detail-row .reward-bubble { width: 64px; height: 64px; background-size: cover; border-radius: 50%; display: flex; align-items: center; justify-content: center; position: relative; flex-shrink: 0; }
#research-app .reward-detail-row .reward-bubble img { max-width: 85%; max-height: 85%; }
#research-app .reward-detail-row .reward-details { flex-grow: 1; padding-left: 15px; display: flex; justify-content: space-between; align-items: center; }
#research-app .reward-detail-row .reward-name { font-weight: 500; }
#research-app .reward-detail-row .cp-values { text-align: right; }
#research-app .reward-detail-row .cp-values div { font-size: 0.7em; color: #888; }
#research-app .reward-detail-row .cp-values span { display: inline-block; padding: 0 5px; font-weight: normal; font-size: 1.1em; }
#research-app .hide-items .reward-preview .reward-bubble:not(.featured), #research-app .hide-items .reward-detail-row:not(.featured) { display: none; }
#research-app .hide-items .task-item.has-no-featured-rewards { display: none; }
#research-app .reward-detail-row .reward-bubble .pokemon-on-energy { position: absolute; top: -5px; right: -8px; width: 28px; height: 28px; background-color: #fff; border-radius: 50%; box-shadow: 0 1px 2px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; border: 1px solid #ddd; }
#research-app .reward-detail-row .reward-bubble .pokemon-on-energy img { width: 90%; height: 90%; object-fit: contain; }
#research-app .reward-detail-row .shiny-icon { position: absolute; width: 26px; height: 26px; top: -4px; right: -4px; z-index: 2; filter: drop-shadow(0 0 2px rgba(0,0,0,0.6)); }
#research-app .reward-detail-row .cp-values .max-cp { font-weight: 700; color: #27ae60; }
#research-app .reward-detail-row .cp-values .min-cp { color: #7f8c8d; }
#research-app .reward-detail-row .cp-values .max-cp div, #research-app .reward-detail-row .cp-values .min-cp div { color: #95a5a6; }
